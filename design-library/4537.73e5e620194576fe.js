"use strict";(self.webpackChunklibrary_demo=self.webpackChunklibrary_demo||[]).push([[4537],{5118:(y,_,l)=>{l.d(_,{Y:()=>c});var e=l(5879),d=l(95),g=l(6814),p=l(4729),x=l(6914);let C=(()=>{class r{constructor(){this.fileDropped=new e.vpe}onDragOver(t){this.dragOver=!0,t.preventDefault(),t.stopPropagation()}onDragLeave(t){this.dragOver=!1,t.preventDefault(),t.stopPropagation()}onDrop(t){t.preventDefault(),t.stopPropagation(),this.dragOver=!1;const n=t.dataTransfer.files;n.length>0&&this.fileDropped.emit(n)}static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275dir=e.lG2({type:r,selectors:[["","ddFileDragDrop",""]],hostVars:2,hostBindings:function(n,s){1&n&&e.NdJ("dragover",function(m){return s.onDragOver(m)})("dragleave",function(m){return s.onDragLeave(m)})("drop",function(m){return s.onDrop(m)}),2&n&&e.ekj("fileover",s.dragOver)},inputs:{dragAndDrop:["ddFileDragDrop","dragAndDrop"]},outputs:{fileDropped:"fileDropped"},standalone:!0})}return r})();const i=function(r){return{"dd-primary-500-fg":r}};function F(r,o){if(1&r&&(e.TgZ(0,"label",9)(1,"span"),e._uU(2),e.qZA()()),2&r){const t=e.oxw();e.Tol(t.backgroundColor),e.Q6J("ngClass",e.VKq(5,i,"dd-white"===t.backgroundColor)),e.xp6(2),e.Oqu(t.label)}}const v=function(r){return{"dd-primary-300-fg":r}};function D(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"span",9),e._uU(2),e.qZA(),e._UZ(3,"dd-icon",10),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Gre("",t.backgroundColor," text-body-2"),e.Q6J("ngClass",e.VKq(6,v,"dd-white"===t.backgroundColor)),e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("icon","dd-icon-attachment")}}function O(r,o){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"dd-chip",13),e.NdJ("chipClick",function(){const h=e.CHM(t).$implicit,m=e.oxw(2);return e.KtG(m.removeFile(h))}),e.qZA(),e.BQk()}if(2&r){const t=o.$implicit;e.xp6(1),e.Q6J("chipText",t.name)("icon","dd-icon-close")("iconColor","dd-danger-fg")("stopPropagation",!0)}}function f(r,o){if(1&r&&(e.TgZ(0,"div",11),e.YNc(1,O,2,4,"ng-container",12),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.files)}}function a(r,o){if(1&r&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.Q6J("id","file-upload-error"),e.xp6(1),e.hij(" ",t.errorMessage," ")}}function u(r,o){if(1&r&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(t.disclaimerText)}}let c=(()=>{class r{constructor(){this.text="Drop file or click to select",this.label="",this.multiple=!0,this.variant="small",this.backgroundColor="dd-white",this.valueChanged=new e.vpe,this.files=[],this.value=new d.NI,this.showErrors=!1,this.genericError="Invalid file",this.ObjectKeys=Object.keys,this._onChange=t=>{},this._onTouched=()=>{}}get errorMessage(){if(this.value.errors){const t=this.ObjectKeys(this.value.errors);if(this.errorMessages){const n=this.ObjectKeys(this.errorMessages).find(s=>t.includes(s));if(n&&this.errorMessages[n])return this.errorMessages[n]}return this.genericError}}get containerClass(){return{"default-size":"small"===this.variant,"min-h-200":"medium"===this.variant}}onSelectFiles(t){const n=this.convertToArray(t.target.files);this.checkForMultiple(n),t.target.value=""}ngOnChanges(t){t.errors&&setTimeout(()=>{this.value.setErrors(t.errors.currentValue)}),this.submitted&&(this.showErrors=!0)}onFileDropped(t){const n=this.convertToArray(t);this.checkForMultiple(n)}writeValue(t){const n=this.convertToArray(t);if(!(n.length<2||this.multiple))throw Error("Multiple files not allowed");this.files=n,this.value.setValue(t),this.emitChanges(this.files)}checkForMultiple(t){if(this.multiple){const n=this.files.concat(t);this.writeValue(n)}else this.writeValue(t)}convertToArray(t){return t?t instanceof File?[t]:Array.isArray(t)?t:Array.prototype.slice.call(t):[]}removeFile(t){const n=this.files.indexOf(t);if(n>=0){const s=this.files.slice();s.splice(n,1),this.writeValue(s)}}emitChanges(t){this.valueChanged.emit(t),this._onChange(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}registerOnValidatorChange(t){this._onChange=t}validate(){return!this.value.valid&&this.errors?this.errors:null}static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["dd-file-upload"]],inputs:{text:"text",disclaimerText:"disclaimerText",label:"label",multiple:"multiple",errorMessages:"errorMessages",errors:"errors",submitted:"submitted",variant:"variant",backgroundColor:"backgroundColor"},outputs:{valueChanged:"valueChanged"},features:[e._Bn([{provide:d.JU,useExisting:(0,e.Gpc)(()=>r),multi:!0},{provide:d.Cf,useExisting:(0,e.Gpc)(()=>r),multi:!0}]),e.TTD],decls:10,vars:8,consts:[["fxLayout","column"],[1,"file-upload","border-radius-8","p-spacer-xmini","dd-primary-200-border","text-center","cursor-pointer","w-100-p","h-100-p",3,"ddFileDragDrop","ngClass","click","fileDropped"],[3,"class","ngClass",4,"ngIf"],[4,"ngIf","ngIfElse"],["filesTemplate",""],["class","error-text text-body-2 dd-danger-fg",3,"id",4,"ngIf"],["class","my-spacer-solo",4,"ngIf"],[1,"file-input",3,"type","multiple","change"],["fileUpload",""],[3,"ngClass"],[1,"empty-attachments-icon",3,"icon"],["fxLayout","wrap","fxLayoutAlign","start start",1,"w-100-p","h-100-p","g-spacer-xmini","chips-container"],[4,"ngFor","ngForOf"],[1,"file-chip",3,"chipText","icon","iconColor","stopPropagation","chipClick"],[1,"error-text","text-body-2","dd-danger-fg",3,"id"],[1,"my-spacer-solo"]],template:function(n,s){if(1&n){const h=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){e.CHM(h);const M=e.MAs(9);return e.KtG(M.click())})("fileDropped",function(M){return s.onFileDropped(M)}),e.YNc(2,F,3,7,"label",2),e.YNc(3,D,4,8,"ng-container",3),e.YNc(4,f,2,1,"ng-template",null,4,e.W1O),e.qZA(),e.YNc(6,a,2,2,"div",5),e.YNc(7,u,2,1,"div",6),e.TgZ(8,"input",7,8),e.NdJ("change",function(M){return s.onSelectFiles(M)}),e.qZA()()}if(2&n){const h=e.MAs(5);e.xp6(1),e.Q6J("ngClass",s.containerClass),e.xp6(1),e.Q6J("ngIf",s.label),e.xp6(1),e.Q6J("ngIf",s.files.length<1)("ngIfElse",h),e.xp6(3),e.Q6J("ngIf",(null==s.value?null:s.value.errors)&&s.errorMessage&&s.showErrors),e.xp6(1),e.Q6J("ngIf",s.disclaimerText),e.xp6(1),e.Q6J("type","file")("multiple",s.multiple)}},dependencies:[g.mk,g.sg,g.O5,p.o,x.Y,C],styles:["[_nghost-%COMP%]{width:100%;height:100%}.file-input[_ngcontent-%COMP%]{display:none}.chips-container[_ngcontent-%COMP%]{align-content:start}.file-upload[_ngcontent-%COMP%]{border:2px dashed;position:relative;margin-bottom:16px}.kamux-theme[_nghost-%COMP%]   .file-upload.default-size[_ngcontent-%COMP%], .kamux-theme   [_nghost-%COMP%]   .file-upload.default-size[_ngcontent-%COMP%]{min-height:36px!important}.file-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;left:9px;z-index:2;font-size:12px;line-height:11px;background-color:inherit;padding:0 4px;height:6px;top:-2px;display:flex;align-items:flex-end}.file-upload[_ngcontent-%COMP%]   .empty-attachments-icon[_ngcontent-%COMP%]{position:absolute;right:4px;top:4px}.error-text[_ngcontent-%COMP%]{margin-top:-16px}.kamux-theme[_nghost-%COMP%]   .fileover[_ngcontent-%COMP%], .kamux-theme   [_nghost-%COMP%]   .fileover[_ngcontent-%COMP%]{border-color:#a7d500!important}"]})}return r})()},5787:(y,_,l)=>{l.d(_,{Ob:()=>D,r6:()=>O});var e=l(6814),d=l(95),g=l(4177),p=l(4243),x=l(6828),C=l(4169),i=l(6905),F=l(6364),v=l(5879);let D=(()=>{class f{static#e=this.\u0275fac=function(c){return new(c||f)};static#t=this.\u0275mod=v.oAB({type:f});static#i=this.\u0275inj=v.cJS({imports:[e.ez,g.hJ,i.Q,p.dT,C.kx,d.UX,g.hJ,x.o,F.PQ]})}return f})();class O{static fileExtension(a){return u=>{if(u.value){const c=a.map(t=>t.trim().toLowerCase()),o=u.value.map(t=>t.name).filter(t=>{const n=t.slice(2+(t.lastIndexOf(".")-1>>>0)).toLowerCase();return!c.includes(n)}).map(t=>({name:t,ext:t.slice(2+(t.lastIndexOf(".")-1>>>0))}));return o.length?{fileExtension:{requiredExtension:a.toString(),actualExtensions:o}}:null}return null}}static uniqueFileNames(a){if(a.value){const c=a.value.map(o=>o.name).reduce((o,t)=>(o[t]=o[t]?o[t]+1:1,o),{}),r=Object.entries(c).filter(o=>o[1]>1).map(o=>({name:o[0],count:o[1]}));return r.length?{uniqueFileNames:{duplicatedFileNames:r}}:null}return null}static maxFileSize(a){return u=>{if(u.value){const r=u.value.filter(o=>o.size>a).map(o=>({name:o.name,size:o.size}));return r.length?{maxFileSize:{maxSize:a,actualSizes:r}}:null}return null}}static required(a){return a?.value?.length?null:{required:!0}}}},4537:(y,_,l)=>{l.r(_),l.d(_,{FileUploadDemoComponent:()=>f});var e=l(6814),d=l(95),g=l(4243),p=l(5787),x=l(870),C=l(3350),i=l(5879),F=l(5118),v=l(2733),D=l(9635);function O(a,u){if(1&a&&(i.ynx(0),i.TgZ(1,"div",10),i._uU(2," JSON of the errors object from the FormControl: "),i.qZA(),i.TgZ(3,"div"),i._uU(4),i.ALo(5,"json"),i.qZA(),i.BQk()),2&a){const c=i.oxw();i.xp6(4),i.hij(" ",i.lcZ(5,1,c.fileForm2.controls.multiFile.errors)," ")}}let f=(()=>{class a extends x.Jo{constructor(){super("FileUploadComponent"),this.submitted=!1,this.errorMessages={required:"Add files",uniqueFileNames:"Duplicate files",fileExtension:"Not supported file type",maxFileSize:"Maximum file size exceeded."},this.fileForm=new d.cw({multiFile:new d.NI(null,[p.r6.required,p.r6.uniqueFileNames]),singleFile:new d.NI(null,[])}),this.fileForm2=new d.cw({multiFile:new d.NI(null,[p.r6.required,p.r6.uniqueFileNames,p.r6.fileExtension(["pdf"]),p.r6.maxFileSize(3e4)])}),this.codeDemos["Single file"]='\n<dd-file-upload [text]="\'Drop file or click to select (single)\'"\n    [errors]="fileForm.controls[\'singleFile\'].errors"\n    [formControlName]="\'singleFile\'"\n    [multiple]="false"\n    [variant]="\'medium\'">\n</dd-file-upload>',this.codeDemos.Multifile='\n<dd-file-upload [text]="\'Drop file or click to select\'"\n    [label]="\'Upload files\'"\n    [formControlName]="\'multiFile\'"\n    [errors]="fileForm2.controls[\'multiFile\'].errors"\n    [variant]="\'small\'"\n    [errorMessages]="errorMessages"\n    [multiple]="true"\n    [submitted]="true"\n    [disclaimerText]="\'Only pdf files are accepted.\'">\n</dd-file-upload>',this.codeDemos["Form example"]="\nnew FormGroup({\n    multiFile: new FormControl<File[] | null>(null, [FileValidators.required, FileValidators.uniqueFileNames, FileValidators.fileExtension(['pdf']), FileValidators.maxFileSize(30_000)]),\n});"}static#e=this.\u0275fac=function(r){return new(r||a)};static#t=this.\u0275cmp=i.Xpm({type:a,selectors:[["app-file-upload-demo"]],standalone:!0,features:[i.qOj,i.jDz],decls:13,vars:26,consts:[[3,"documentationData","codeDemos"],[1,"flex-column","w-100-p"],[1,"flex-row",3,"formGroup"],[1,"w-400","mr-spacer-large"],[3,"text","formControlName","errors","multiple","variant"],[1,"w-400"],[3,"text","errors","formControlName","multiple","variant"],[1,"mt-spacer-basic","w-400",3,"formGroup"],[3,"text","label","formControlName","errors","variant","errorMessages","multiple","submitted","disclaimerText"],[4,"ngIf"],[1,"mt-spacer-basic"]],template:function(r,o){1&r&&(i.TgZ(0,"dd-card")(1,"dd-card-row")(2,"app-component-documentation",0),i.ALo(3,"async"),i.TgZ(4,"div",1)(5,"div",2)(6,"div",3),i._UZ(7,"dd-file-upload",4),i.qZA(),i.TgZ(8,"div",5),i._UZ(9,"dd-file-upload",6),i.qZA()(),i.TgZ(10,"div",7),i._UZ(11,"dd-file-upload",8),i.YNc(12,O,6,3,"ng-container",9),i.qZA()()()()()),2&r&&(i.xp6(2),i.Q6J("documentationData",i.lcZ(3,24,o.documentationData$))("codeDemos",o.codeDemos),i.xp6(3),i.Q6J("formGroup",o.fileForm),i.xp6(2),i.Q6J("text","Drop file or click to select (multi)")("formControlName","multiFile")("errors",o.fileForm.controls.multiFile.errors)("multiple",!0)("variant","medium"),i.xp6(2),i.Q6J("text","Drop file or click to select (single)")("errors",o.fileForm.controls.singleFile.errors)("formControlName","singleFile")("multiple",!1)("variant","medium"),i.xp6(1),i.Q6J("formGroup",o.fileForm2),i.xp6(1),i.Q6J("text","Drop file or click to select")("label","Upload files")("formControlName","multiFile")("errors",o.fileForm2.controls.multiFile.errors)("variant","small")("errorMessages",o.errorMessages)("multiple",!0)("submitted",!0)("disclaimerText","Only pdf files are accepted."),i.xp6(1),i.Q6J("ngIf",o.fileForm2.controls.multiFile.errors))},dependencies:[e.ez,e.O5,e.Ov,e.Ts,p.Ob,F.Y,d.UX,d.JJ,d.JL,d.sg,d.u,C.Z,g.dT,v.A,D.e]})}return a})()}}]);